name: Production

on:
  push:
    branches: [ "production" ]
  pull_request:
    branches: [ "production" ]

concurrency:
  group: ${{ github.workflow }}-${{ github.event.pull_request.number || github.ref }}
  cancel-in-progress: true

jobs:
#  Deploy:
#    if: github.ref == 'refs/heads/production'
#    name: ğŸ‰ Deploy
#    runs-on: ubuntu-latest
#    steps:
#      - name: ğŸšš Get latest code
#        uses: actions/checkout@v3
#      - name: ğŸ“‚ Sync files
#        uses: SamKirkland/FTP-Deploy-Action@v4.3.4
#        with:
#          server: ${{ secrets.PROD_FTP_SERVER }}
#          username: ${{ secrets.PROD_FTP_USERNAME }}
#          password: ${{ secrets.PROD_FTP_PASSWORD }}
  Deploy-Apply:
    name: âš™ï¸ Apply Deploy
    runs-on: [self-hosted]
    steps:
      - name: âš™ï¸ DB backup and App apply changes
        run: |
          cat ~/.ssh/id_rsa.pub
          cd /home/khardl5/public_html/
          git pull
          ./deploy.sh